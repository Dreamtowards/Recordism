
var last_hit_id = 12752924442;
var row_count_in_table = 30
var live_orange_dots = false;
var backlink_advanced = false;
var recent_visits_count = 50;


var history = {"hfl8m8tbb1dn5lmdgllvbvmrtb":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 4:23 pm","timestamp":1637339016}],"7g3cmo9f75irota6pbq2k3m86p":[{"url":"https:\/\/homebase.of.simplexstudio.net\/blog\/cas\/","date":"November 19, 2021, 12:07 pm","timestamp":1637323663}],"mlpon6on3fa4n2t1grvbkfiqvi":[{"url":"https:\/\/homebase.of.simplexstudio.net\/blog\/cas\/","date":"November 19, 2021, 11:20 am","timestamp":1637320838}],"mth853jaj3m81qffijqeivl643":[{"url":"https:\/\/homebase.of.simplexstudio.net\/blog\/cas\/","date":"November 19, 2021, 11:15 am","timestamp":1637320558}],"5ed148h59tl314nknc3odg8rnc":[{"url":"https:\/\/homebase.of.simplexstudio.net\/blog\/cas\/","date":"November 19, 2021, 6:34 am","timestamp":1637303697}],"7rujnlsknbm0srsks9d4mkrrbo":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 5:08 am","timestamp":1637298513}],"il6octi3u1sha0uq8pll93g85f":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 2:10 am","timestamp":1637287815}],"s9rvqb1u8nlu4fpgtfsjqvnjt0":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 1:00 am","timestamp":1637283615}],"m4rfhvp5es5v25vujt9mhd360u":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 1:00 am","timestamp":1637283604}],"iju336leqe84h237qbr3co0umj":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:59 am","timestamp":1637283549}],"6abo715btqhhqe213rid489aru":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:58 am","timestamp":1637283519}],"qm4kjum0ecbi9rmnom3ulhdlrm":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:58 am","timestamp":1637283493}],"eh4mfjr18u7g8vbhmtr11v7v7h":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:57 am","timestamp":1637283474}],"kr1fio6dc1t2gl0slv2n6668c3":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:57 am","timestamp":1637283468}],"hihs6ii6daomdqgc4bhv2503cp":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:57 am","timestamp":1637283453}],"38oj46tvqipqp23l3nkh1vq5ap":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:56 am","timestamp":1637283418}],"nnvm3vki66l78kqf389et69ove":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:56 am","timestamp":1637283366}],"512ivumtcejqk92t8h2qdd7094":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:55 am","timestamp":1637283353}],"987o5n57clcovgnsqtc4t0012j":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:37 am","timestamp":1637282239}],"smd0ps5mtpcui630kjrng44obd":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:37 am","timestamp":1637282238}],"0a2bf796tomrkrp9lj45adl3s6":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:37 am","timestamp":1637282238}],"3ssa8dfi0lodih5q458dptji51":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:37 am","timestamp":1637282237}],"2aaok2sh69r3pmotgruje8lr8u":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:32 am","timestamp":1637281976}],"u9i0o51lji4fvq02v39fq2pu49":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:32 am","timestamp":1637281972}],"pdgh2r9h5q9mgo666i5umrnnpu":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:32 am","timestamp":1637281944}],"tlvq7kv7c1br5c7l4s6ojlj1ml":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:32 am","timestamp":1637281935}],"1qatettb57ls4dt48lm1014j6d":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:32 am","timestamp":1637281928}],"5ahpk6419edfpohu3bhg9ftq55":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:29 am","timestamp":1637281752}],"mr565k6i5sdunbimij6h5ag71u":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 19, 2021, 12:29 am","timestamp":1637281748}],"ehv30agk0q9v3eofn75juh9r6j":[{"url":"https:\/\/homebase.of.simplexstudio.net\/blog\/cas\/","date":"November 18, 2021, 5:00 pm","timestamp":1637254835}],"43sgfopv258b9ldsf10aciauqt":[{"url":"https:\/\/homebase.of.simplexstudio.net\/blog\/202110\/21a40\/setup-https4http","date":"November 18, 2021, 4:31 pm","timestamp":1637253095}],"tav1numoocfco4bhonenur6ql8":[{"url":"https:\/\/homebase.of.simplexstudio.net\/blog\/202110\/21a40\/setup-https4http","date":"November 18, 2021, 4:30 pm","timestamp":1637253058}],"kqvbmhengr0reso35lqfqde2v3":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 4:12 pm","timestamp":1637251939}],"9mgqf8d0rfnfot9vs1rgpvfsr5":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 4:12 pm","timestamp":1637251925}],"25j1gc120ogfkh4ti4s34k2k0r":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 3:28 pm","timestamp":1637249330}],"qee9cnt6bls4gh1l95n7io4soc":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:38 pm","timestamp":1637246299}],"539s161eitkuktc5t98htifgfu":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:37 pm","timestamp":1637246277}],"kt5l46os9afmh9a4tf34nkm1tg":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:37 pm","timestamp":1637246233}],"btlitc7kgim50otlt4lraq90ev":[{"url":"http:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:36 pm","timestamp":1637246216}],"4gqo1ckfkp25a3das4frb2g7nc":[{"url":"http:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:36 pm","timestamp":1637246173}],"5rmgg2j1g0qdk7llir2ubr48ju":[{"url":"http:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:35 pm","timestamp":1637246109}],"niu30p50fugca03vgj1ufcmpcd":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:34 pm","timestamp":1637246058}],"f27sqeb4pfksvevqieb1cbshq5":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:34 pm","timestamp":1637246055}],"jshorarpph7td4a4qrdvpifkcp":[{"url":"https:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:33 pm","timestamp":1637246038}],"1n6eueellren5qhjn39c8j5ijb":[{"url":"http:\/\/homebase.of.simplexstudio.net\/","date":"November 18, 2021, 2:33 pm","timestamp":1637245996}],"s0jeaq8bel9rpauhf8jf4c0auj":[{"url":"https:\/\/goodman.of.dalao.world\/blog\/cas\/","date":"November 18, 2021, 2:22 pm","timestamp":1637245348}],"ttoalu1v2t93dgi2728858qb4n":[{"url":"https:\/\/goodman.of.dalao.world\/blog\/cas\/","date":"November 18, 2021, 11:22 am","timestamp":1637234529}],"uqej8rasr6vgp0tc0pi5ir18b8":[{"url":"https:\/\/goodman.of.dalao.world\/blog\/cas\/","date":"November 18, 2021, 8:21 am","timestamp":1637223712}],"vi8v614rg8l2glr778hg4a7t35":[{"url":"https:\/\/goodman.of.dalao.world\/blog\/cas\/","date":"November 18, 2021, 5:21 am","timestamp":1637212889}],"5s0crf7bnonus7ppiaflbvp9b0":[{"url":"https:\/\/goodman.of.dalao.world\/blog\/cas\/","date":"November 18, 2021, 2:21 am","timestamp":1637202089}]};

var map = L.map('map', {
    center: [19.426216, 15.7166481],
    zoom: 2,
    scrollWheelZoom: false,
    tap: false,
    renderer :L.svg()
});

var lOSM = new L.TileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Get your <a href="/">free counter</a> with map',
});

var lMapbox = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiY2x1c3RybWFwcyIsImEiOiJjaXEwbG9hZXowMDByaHJuZDU0dDU0cDZ0In0.RDTRO6skanUfOnb6eijYEA', {
    maxZoom: 18,
    attribution: 'Get your <a href="/">free counter</a> with map',
    id: 'mapbox.streets'
});

//var lGoogle = new L.Google("ROADMAP",
//    {attribution: 'Get your <a href="/">free counter</a> with map', tap: false, draggable: false});
//var lBing = new L.BingLayer("LfO3DMI9S6GnXD7d0WGs~bq2DRVkmIAzSOFdodzZLvw~Arx8dclDxmZA0Y38tHIJlJfnMbGq5GXeYmrGOUIbS2VLFzRKCK0Yv_bAl6oe-DOc", {type: 'Road'});


var OpenMapSurfer_Roads = L.tileLayer('http://korona.geog.uni-heidelberg.de/tiles/roads/x={x}&y={y}&z={z}', {
    maxZoom: 20,
    attribution: 'Get your <a href="/">free counter</a> with map'
});

var lESRI = L.tileLayer('//services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}',
    {
        maxZoom : 20,
        attribution : ''
    });


map.addLayer(lESRI);

map.addControl(new L.Control.Layers({
    'WorldStreetMap' : lESRI,
    'OpenMap': OpenMapSurfer_Roads,
    'OpenStreetMap': lOSM,
    'MapBox': lMapbox
    //'Google': lGoogle
    //'Bing': lBing,
}));


var addressPoints = [["30.6014000","-95.1050000","Coldspring, United States",1,1],["37.5112000","126.9741000","Republic of Korea",1,1],["31.0456000","121.3997000","Shanghai, China",2,1],["24.7570000","121.7530000","Yilan, Taiwan",2,1],["35.0000000","105.0000000","China",3,1],["24.1433000","120.6814000","Taichung, Taiwan",9,1],["37.4192000","-122.0574000","Mountain View, United States",17,1],["42.2776000","-83.7409000","Ann Arbor, United States",44,2],["37.7510000","-97.8220000","United States",77,3],["50.8274000","4.3480000","Brussels, Belgium",133,6]];
var max_visit_count = 133;

var number = 0;
var markers = {};

var sys_icons = {"Win10":["icon_win10","Windows 10"],"Win8.1":["icon_win81","Windows 8.1"],"Win32":["icon_win32","Win32"],"WinVista":["icon_win_vista","Windows Vista"],"Linux":["icon_linux","Linux"],"Android":["icon_android_os","Android"],"Android WebView":["icon_android_webview"],"MacOSX":["icon_osx","Mac OS X"],"Chrome":["icon_chrome"],"Chromium":["icon_chromium"],"Edge":["icon_edge"],"Opera":["icon_opera"],"Win7":["icon_win7","Windows 7"],"Firefox":["icon_firefox"],"Safari":["icon_safari"],"Mobile Safari UIWebView":["icon_safari"],"iOS":["icon_ios","iOS"],"IE":["icon_ie"]};
var initialPoints = addressPoints.length;

var dynamic_multiplex = 6;
var x = Math.ceil ( initialPoints / 30 );

x = x > 4 ? 4 : x;

if ( initialPoints > 10 ) {
    dynamic_multiplex = 6 - x;
}

function updateCounts(count) {
    if (!live_orange_dots) {
        return;
    }
    //var count = 1;
    var one_up_container = $('.non_unique_visitor_count-oneup');
    var num_element = $('.non_unique_visitor_count-count');
    $(".badge.plus").remove();
    $('<span class="badge plus" style="margin: 0px 4px 0px 0px; vertical-align: middle;">+' + count + '</span>').data('count', count)
        .prependTo(one_up_container).fadeOut(3500, function () {
        $(this).remove();
    });
    var total_count = (parseInt(num_element.data('count')) + count);
    num_element.html(total_count.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","))
        .data('count', total_count);
}

function updateTheValue(element, count) {
    var _count = element.data('value') + count;

    element.data('value', _count) ;
    element.html ( _count.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") );
}

function setTheValue(element, count) {
    element.data('value', parseInt(count)) ;
    element.html ( count.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") );
}

function updateSummaryTable(summary, count ) {

    if ( count ) {
        updateTheValue ( $(".today-pageviews"), count );
        updateTheValue ( $(".total-pageviews"), count );
    }

    initPopover(summary);
}

function animationFrame() {

    var nums = 0, rad, p = 0;

    for (var loc in markers) {
        var d = markers[loc];
        ++p;
        rad = d.marker.getRadius();
        if (rad > d.to) {
            rad--;
            d.marker.setRadius(rad);
            if (rad > d.to) {
                ++nums;
            }
        }
    }

    if (nums > 0) {
        setTimeout(animationFrame, 50);
    }
}

function startAnimation() {
    setTimeout(animationFrame, 30);
}

function addMarker(a, n, live) {
    var marker;

    if (arguments.length < 2) {
        n = false;
    }

    if ( arguments.length < 3 ) {
        live = false;
    }


    var gid = a[5] ? a[5] : false;
    var cnt = a[3];

    if (!a[0] || !a[1] ) {
        return;
    }

    if (gid && (gid in markers)) {
        markers[gid].data[3] += cnt;
        cnt = markers[gid].data[3];
    }

    var s = cnt > 1 ? "s" : "";

    if ( a[2] == null || a[2] == 'null') {

    }

    if ( n && a[4] >= 5 ) {

    }


    var title = cnt + (gid ? ' recent' : '') + ' visitor' + s + ' from ' + a[2];

    var markerSize = {
        1: 3, 2: 5, 3: 8, 4: 10, 5: 12, 6: 14
    };

    var markerSizeNew = {
        1: 4, 2: 6, 3: 9, 4: 11, 5: 13, 6: 14
    };

    //--- 90 : 3, 60 : 4, 30 : 5, 10 : 6

    var radius = 0;
    var multiplex = live ? 8 : dynamic_multiplex;

    if (gid && (gid in markers)) {
        //---
        var pd = markers[gid].data;
        var r = pd[4];

        radius = !n ? markerSize[r] : markerSizeNew[r];

        markers[gid].marker.setRadius(radius * multiplex);
        markers[gid].to = radius;

        markers[gid].marker.bindTooltip(title);

    } else {

        var r = a[4];
        radius = !n ? markerSize[r] : markerSizeNew[r];

        marker = L.circleMarker([a[0], a[1]], {
            radius: !n ? radius : radius * multiplex,
            fillColor: !n ? "#FF0000" : "#F8A400",
            fillOpacity: !n ? .7 : 1,
            weight: .5,
            color: "#ffffff"
            , className: "mn"
        }).bindTooltip(title).addTo(map);

        if (gid) {
            markers[gid] = {'marker': marker, 'to': radius, 'data': a};
        }
    }
}

function addMarkerAndRow(a, text) {
    ++number;
    addMarker(a, text, true);


    var date = a[6].replace(/-/g, "/");
    var cty = a[7];
    var iso_code = a[8];
    var country = a[9];

    var $head = $('#recent-visits');
    var $tr = $head.find('tr')[0];

    var flagcode = (iso_code ? iso_code.toLowerCase() : "");
    var flg = '<span class="flag16 f16' + flagcode + '" style="margin-right: 5px;" title="' + country + '"></span>';

    var date = new Date(date);
    var dd = new Date(date.getTime() - (date.getTimezoneOffset() * 60000));

    var $cr = $('<tr class="newtr"><td  data-lat="' + a[0] + '" data-lng="' + a[1] + ' " style="cursor: pointer;"> ' + flg + ' <strong>' + cty + '</strong> ' +
        '<time class="timeago" datetime="' + dd.toISOString() + '">' + date + '</time></td></tr>');

    $cr.insertBefore($tr);
    $("time.timeago").timeago();

    var count = $head.find('tr').length;

    if (count > row_count_in_table) {
        $head.find('tr:last').remove();
    }

}

for (var i = 0; i < addressPoints.length; i++) {
    var a = addressPoints[i];
    addMarker(a);
}

function updateLastDates(activeUser) {

    if (activeUser != null) {
        var user = activeUser;

        var date = user[6].replace(/-/g, "/");
        var cty = user[7];
        var iso_code = user[8];

        var name = user[2];
        var flagcode = (iso_code ? iso_code.toLowerCase() : "");
        var flg = '<span class="flag16 f16' + flagcode + '"></span> ';


        var date = new Date(date);
        var dd = new Date(date.getTime() - (date.getTimezoneOffset() * 60000));
        $(".last-active-user").html(flg + name + '<time class="timeago text-nowrap" style="margin-left:5px;" datetime="' + dd.toISOString() + '">' + date + '</time>');
        $(".active-user").addClass("countedlive");
        $("time.timeago").timeago();

        setTimeout(function () {
            $(".active-user").removeClass("countedlive");
        }, 1100);

    }

    var d = new Date();
    $(".last-update").html ( transformDate(d, true) );

    setTimeout(function () {
        $(".active-user").removeClass("countedlive");
        $(".last-update").removeClass("countedlive");
    }, 1100);
}


function liveHits() {

    if ( 'pausedUpdates' in window  ) {
        if ( window.pausedUpdates ) {
            return;
        }
    }

    $.get(
        '/ajax/live_hits',

        {
            'id': '2217192',
            'last_hit_id': last_hit_id,
            'max_hit_id': last_hit_id
        },

        function (data) {

            var activeUser = null;

            if (data.last_hit_id) {
                last_hit_id = data.last_hit_id;
            }

            if ((data.hits != null) && (data.hits.length > 0)) {
                //increaseCounter(data.hits.length);

                for (var _i = data.hits.length - 1; _i >= 0; _i--) {
                    if (live_orange_dots) {
                        addMarkerAndRow(data.hits[_i], 'AJAX');
                    }
                    activeUser = data.hits[_i];
                    liveStats(activeUser[6].replace(/-/g, "/"));
                }

                updateCounts(data.hits.length);
                updateSummaryTable(data.visit_table, data.hits.length);
                startAnimation();
            } else {
                updateSummaryTable(data.visit_table, 0);
            }


            updateLiveStats();
            updateLastDates(activeUser);
        },
        'json');
}

setInterval(liveHits, 10000);
</script>

<script>

    $(document).ready(function () {

    //var start = moment().startOf('month');
    //var end = moment().endOf('month');


    var start = "10/21/2021";
    var end = "11/19/2021";


    var options = {
    "opens": 'left',
    startDate: start,
    endDate: end,
    minDate: "07/04/21",
    //maxDate: moment(),
    ranges: {
    'Today': [moment(), moment()],
    'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
    'Last 7 Days': [moment().subtract(7, 'days'), moment().subtract(1, 'days')],
    'Last 30 Days': [moment().subtract(30, 'days'), moment().subtract(1, 'days')],
    'This Month': [moment().startOf('month'), moment().endOf('month')],
    'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],
    'This Year': [moment().startOf('year'), moment().endOf('year')]
},
    "alwaysShowCalendars": true,
    "autoUpdateInput": false
};

    $('#dp1,#dp3').daterangepicker(options, function (start, end, label) {

    var rng = (label != "Custom Range") ? label : start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD');
    $(".dp").attr("value", rng);

    docCookies.setItem('daterange', 'custom' + '|' + start.format('YYYY-MM-DD') + '|' + end.format('YYYY-MM-DD'), Infinity, '/');
    window.location.reload();
    return false;
});

    options.applyClass = "btn-success downl";

    $('.dp4').daterangepicker(options, function (start, end, label) {

    var rng = (label != "Custom Range") ? label : start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD');
    $(".dp").attr("value", rng);

    docCookies.setItem('daterange', 'custom' + '|' + start.format('YYYY-MM-DD') + '|' + end.format('YYYY-MM-DD'), Infinity, '/');
    window.location.reload();
    return false;
});


    options.opens = "right";
    $('.dp5').daterangepicker(options, function (start, end, label) {

    var rng = (label != "Custom Range") ? label : start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD');
    $(".dp").attr("value", rng);

    docCookies.setItem('daterange', 'custom' + '|' + start.format('YYYY-MM-DD') + '|' + end.format('YYYY-MM-DD'), Infinity, '/');
    window.location.reload();
    return false;
});

    $(".downl").html("Request");

    function cb(start, end) {
    $('.dp').attr("value", moment.unix(1634774400).format('MMM D, YYYY') + ' - ' + moment.unix(1637280000).format('MMM D, YYYY'));
}

    cb(start, end);
});